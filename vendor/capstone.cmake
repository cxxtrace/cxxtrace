cmake_minimum_required(VERSION 3.10)

foreach (ARCHITECTURE ARM ARM64 EVM M680X M68K MIPS PPC SPARC SYSZ TMS320C64X X86 XCORE)
  set(CAPSTONE_${ARCHITECTURE}_SUPPORT FALSE CACHE BOOL "" FORCE)
endforeach ()
set(CAPSTONE_X86_SUPPORT TRUE CACHE BOOL "" FORCE)

set(CAPSTONE_BUILD_CSTOOL FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_BUILD_DIET FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_BUILD_SHARED TRUE CACHE BOOL "" FORCE)
set(CAPSTONE_BUILD_STATIC FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_BUILD_STATIC_RUNTIME FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_BUILD_TESTS FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_OSXKERNEL_SUPPORT FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_USE_DEFAULT_ALLOC TRUE CACHE BOOL "" FORCE)
set(CAPSTONE_X86_ATT_DISABLE FALSE CACHE BOOL "" FORCE)
set(CAPSTONE_X86_REDUCE FALSE CACHE BOOL "" FORCE)

add_subdirectory(capstone)
target_compile_options(capstone-shared PRIVATE -Wno-sign-compare -Wno-unused-parameter -Wno-missing-field-initializers)

add_library(capstone INTERFACE)
target_include_directories(capstone INTERFACE capstone/include)
target_link_libraries(capstone INTERFACE capstone-shared)
